<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Basic AAD Test</title>
    <script>
        window.onerror = function (errorMsg, url, lineNumber) {
            alert(' Url: ' + url + ' Line: ' + lineNumber + '\r\n' + errorMsg );
        }
    </script>
</head>

<body>
    <div>
        <p> No any - just a redirect to AAD and print the # value.</p>
    </div>
    <div id="content">
        <a href="https://login.microsoftonline.com/common/oauth2/authorize?response_type=id_token&client_id=b8dd3290-662a-4f91-92b9-3e70fbabe04e&redirect_uri=http%3A%2F%2Fjohnshew.github.io%2FGraphDashboard%2Ftest%2Ftest11.html&nonce=HelloWorld">
        AAD redirect back here.
        </a>
    </div>
    <div>
        <div id="DebugConsole" style="display:none">
            <div id="DebugLog" style="margin:10px;padding:10px;background:SkyBlue"></div>
            <div style="margin:0px;padding:10px">
                <input id="DebugCmd" type="text" placeholder="> " style="width:100%" />
            </div>
        </div>
    </div>

    <script>
        (function () 
            {
                var forceDebugConsole = true;
                var params = document.location.search.replace(/.*?\?/,"").split("&").map(function (kv) { return kv.split('='); }).reduce(function (prev, kva) { prev[kva[0]] = (!kva[1]) ? "" : kva[1]; return prev }, {});
                if (forceDebugConsole || params["console"] ) {
                    var logger = document.getElementById('DebugLog');
                    document.getElementById('DebugConsole').style.display = "";
                    console.log = function (message) {
                        if (typeof message == 'object') {
                            try {
                                message = JSON.stringify(message);
                            } 
                            catch(err) {
                                message = "[Could not stringify object]";
                            };
                        }                    
                        logger.innerHTML +=  '<p>' + message + '</p>';                
                        // console_log(message);
                    };
                    var cmd = document.getElementById('DebugCmd');
                    cmd.onchange = function () {
                        var result = ""
                        try { result = eval(cmd.value); } catch(err) { result="Unable to evaluate " + cmd.value + " with error " + err.toString(); }
                        console.log(result);
                        try { cmd.scrollIntoView(); } catch(err) {}
                    }
                }           
            })();
            
            console.log(window.location.hash ? ("Hash: " + window.location.hash) : "No hash found.");
    </script>

</body>

</html>