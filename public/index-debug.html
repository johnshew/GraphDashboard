<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Tesla Console</title>
    <script>
        window.onerror = function (errorMsg, url, lineNumber) {
            alert( (url ? url + ' ' : '' ) + ( lineNumber ? lineNumber : '') + '\r\n' + errorMsg );
        }
    </script>
    <script src="https://raw.githubusercontent.com/es-shims/es5-shim/master/es5-shim.js"></script>
    <script src="https://raw.githubusercontent.com/es-shims/es5-shim/master/es5-sham.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">

    <style>
        .tight {
            margin-bottom: 0px;
            margin-top: 0px;
            margin-left: 0px;
            margin-right: 0px;
            padding: 0px
        }
    </style>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="top-nav" class="navbar navbar-inverse navbar-static-top tight">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">Dashboard</a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a id="ShowMail" href="#">Mail</a></li>
                <li><a id="ShowCalendar" href="#">Calendar</a></li>
                <li style="display: none"><a id="ShowContacts" href="#">Contacts</a></li>
                <li style="display:none"><a id="ShowNotes" href="#">Notes</a></li>
            </ul>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a class="dropdown-toggle" role="button" data-toggle="dropdown" href="#">
                            <i class="glyphicon glyphicon-user">&nbsp;<span id="UsernameText"></span></i>&nbsp;<span class="caret"></span>
                        </a>
                        <ul id="account-menu" class="dropdown-menu" role="menu">
                            <li><a id="DoLogout" href="#">Logout</a></li>
                            <li><a id="ShowAbout" href="#">About...</a></li>
                        </ul>
                    </li>
                    <li><a id="DoLogin" href="#">Login</a></li>
                </ul>
            </div>
        </div>
        <!-- /container -->
    </div>

    <div class="container-fluid tight">
        <div class="row tight">
            <div id="Mail"></div>
            <div id="Calendar"></div>
            <div id="Contacts"></div>
            <div id="Notes"></div>
        </div>
        <div id="Loading" class="row tight" style="display:none">
            <p>Welcome. Please login.</p>
        </div>
        <div class="row tight">
            <div id="DebugConsole" class="row tight" style="display:none">
                <div id="DebugLog" style="margin:10px;padding:10px;background:SkyBlue"></div>
                <div style="margin:0px;padding:10px">
                    <input id="DebugCmd" type="text" placeholder="> " style="width:100%" />
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

        <script>
            var forceInPlaceLogin = false;
            var forceDebugConsole = false;
            (function () {
                var params = document.location.search.replace(/.*?\?/,"").split("&").map(function (kv) { return kv.split('='); }).reduce(function (prev, kva) { prev[kva[0]] = (!kva[1]) ? true : kva[1]; return prev }, {});
                if (forceDebugConsole || params["console"] ) {
                    var logger = document.getElementById('DebugLog');
                    document.getElementById('DebugConsole').style.display = "";
                    underlying = console.log;
                    console.log = function (...args) {
                        message = args && args[0];
                        if (message) {
                            try {
                                message = typeof message == "string" ? message : JSON.stringify(message);
                            } 
                            catch(err) {
                                message = "[Could not stringify object]";
                            };
                        }                    
                        if (message) { logger.innerHTML += '<p>' + message + '</p>'; }
                        underlying.apply(console, args);
                    };
                    var cmd = document.getElementById('DebugCmd');
                    cmd.onchange = function () {
                        var result = ""
                        try { result = eval(cmd.value); } catch(err) { result="Unable to evaluate " + cmd.value + " with error " + err.toString(); }
                        console.log(result);
                        try { cmd.scrollIntoView(); } catch(err) {}
                    }
                }        
            })();
            console.log('Starting app');
        </script>
        <script src="./kurve.js"></script>
        <script src="./bundle.js"></script>
</body>

</html>